{
  "openapi": "3.0.0",
  "paths": {
    "/auth/signup": {
      "post": {
        "operationId": "AuthController_signup",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SignupDto" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User successfully registered",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AuthResponseDto" }
              }
            }
          },
          "409": { "description": "User already exists" }
        },
        "summary": "Register a new user",
        "tags": ["auth"]
      }
    },
    "/auth/login": {
      "post": {
        "operationId": "AuthController_login",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/LoginDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User successfully logged in",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AuthResponseDto" }
              }
            }
          },
          "401": { "description": "Invalid credentials" }
        },
        "summary": "Login user",
        "tags": ["auth"]
      }
    },
    "/auth/refresh": {
      "post": {
        "operationId": "AuthController_refresh",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Token successfully refreshed",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AuthResponseDto" }
              }
            }
          },
          "401": { "description": "Invalid or expired refresh token" }
        },
        "summary": "Refresh access token",
        "tags": ["auth"]
      }
    },
    "/auth/google": {
      "get": {
        "operationId": "AuthController_googleAuth",
        "parameters": [],
        "responses": { "302": { "description": "Redirects to Google OAuth" } },
        "summary": "Initiate Google OAuth flow",
        "tags": ["auth"]
      }
    },
    "/auth/google/callback": {
      "get": {
        "operationId": "AuthController_googleAuthCallback",
        "parameters": [],
        "responses": {
          "200": {
            "description": "OAuth authentication successful",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AuthResponseDto" }
              }
            }
          }
        },
        "summary": "Google OAuth callback",
        "tags": ["auth"]
      }
    },
    "/auth/github": {
      "get": {
        "operationId": "AuthController_githubAuth",
        "parameters": [],
        "responses": { "302": { "description": "Redirects to GitHub OAuth" } },
        "summary": "Initiate GitHub OAuth flow",
        "tags": ["auth"]
      }
    },
    "/auth/github/callback": {
      "get": {
        "operationId": "AuthController_githubAuthCallback",
        "parameters": [],
        "responses": {
          "200": {
            "description": "OAuth authentication successful",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AuthResponseDto" }
              }
            }
          }
        },
        "summary": "GitHub OAuth callback",
        "tags": ["auth"]
      }
    },
    "/auth/logout": {
      "post": {
        "operationId": "AuthController_logout",
        "parameters": [],
        "responses": {
          "200": { "description": "User successfully logged out" },
          "401": { "description": "Unauthorized" }
        },
        "summary": "Logout user and revoke refresh token",
        "tags": ["auth"]
      }
    },
    "/auth/revoke": {
      "post": {
        "operationId": "AuthController_revoke",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/RevokeTokenDto" }
            }
          }
        },
        "responses": {
          "200": { "description": "Token successfully revoked" },
          "401": { "description": "Invalid token" }
        },
        "summary": "Revoke a refresh token",
        "tags": ["auth"]
      }
    },
    "/auth/revoke-all": {
      "post": {
        "operationId": "AuthController_revokeAll",
        "parameters": [],
        "responses": {
          "200": { "description": "All tokens successfully revoked" },
          "401": { "description": "Unauthorized" }
        },
        "summary": "Revoke all refresh tokens for current user",
        "tags": ["auth"]
      }
    },
    "/auth/tokens": {
      "get": {
        "operationId": "AuthController_getTokens",
        "parameters": [],
        "responses": {
          "200": { "description": "List of active tokens" },
          "401": { "description": "Unauthorized" }
        },
        "summary": "Get all active refresh tokens for current user",
        "tags": ["auth"]
      }
    },
    "/auth/verify-email": {
      "post": {
        "operationId": "AuthController_verifyEmail",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/VerifyEmailDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email successfully verified",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/AuthResponseDto" }
              }
            }
          },
          "400": { "description": "Invalid or expired token/code" },
          "404": { "description": "Token/code not found" }
        },
        "summary": "Verify email address with token or code",
        "tags": ["auth"]
      }
    },
    "/auth/resend-verification": {
      "post": {
        "operationId": "AuthController_resendVerification",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ResendVerificationDto" }
            }
          }
        },
        "responses": {
          "200": { "description": "Verification email sent successfully" },
          "400": { "description": "Email already verified" },
          "404": { "description": "User not found" }
        },
        "summary": "Resend verification email",
        "tags": ["auth"]
      }
    },
    "/auth/forgot-password": {
      "post": {
        "operationId": "AuthController_forgotPassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ForgotPasswordDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset email sent successfully (if email exists)"
          }
        },
        "summary": "Request password reset",
        "tags": ["auth"]
      }
    },
    "/auth/reset-password": {
      "post": {
        "operationId": "AuthController_resetPassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ResetPasswordDto" }
            }
          }
        },
        "responses": {
          "200": { "description": "Password reset successfully" },
          "400": {
            "description": "Invalid request or password reset not available"
          },
          "404": { "description": "Invalid or expired reset token/code" }
        },
        "summary": "Reset password using token or code",
        "tags": ["auth"]
      }
    },
    "/user/me": {
      "get": {
        "operationId": "UserController_getProfile",
        "parameters": [],
        "responses": {
          "200": {
            "description": "User profile retrieved successfully",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/UserResponseDto" }
              }
            }
          },
          "401": { "description": "Unauthorized" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get current user profile",
        "tags": ["user"]
      },
      "patch": {
        "operationId": "UserController_updateProfile",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UpdateProfileDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Profile updated successfully",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/UserResponseDto" }
              }
            }
          },
          "401": { "description": "Unauthorized" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Update user profile",
        "tags": ["user"]
      },
      "delete": {
        "operationId": "UserController_deleteAccount",
        "parameters": [],
        "responses": {
          "204": { "description": "Account deleted successfully" },
          "401": { "description": "Unauthorized" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Delete user account",
        "tags": ["user"]
      }
    },
    "/user/me/password": {
      "patch": {
        "operationId": "UserController_changePassword",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ChangePasswordDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password changed successfully",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/UserResponseDto" }
              }
            }
          },
          "400": {
            "description": "Password change not available for this account"
          },
          "401": { "description": "Unauthorized or invalid current password" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Change user password",
        "tags": ["user"]
      }
    },
    "/user/me/email": {
      "patch": {
        "operationId": "UserController_changeEmail",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ChangeEmailDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email change requested successfully. Verification email sent.",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/UserResponseDto" }
              }
            }
          },
          "401": { "description": "Unauthorized" },
          "409": { "description": "Email already in use" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Change user email",
        "tags": ["user"]
      }
    },
    "/categories": {
      "post": {
        "operationId": "CategoryController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CreateCategoryDto" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Category created successfully",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CategoryResponseDto" }
              }
            }
          },
          "401": { "description": "Unauthorized" },
          "409": { "description": "Category name already exists" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create a new category",
        "tags": ["categories"]
      },
      "get": {
        "operationId": "CategoryController_findAll",
        "parameters": [
          {
            "name": "type",
            "required": false,
            "in": "query",
            "description": "Filter categories by type",
            "schema": {
              "example": "EXPENSE",
              "type": "string",
              "enum": ["INCOME", "EXPENSE", "SAVING"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Categories retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CategoryResponseDto"
                  }
                }
              }
            }
          },
          "401": { "description": "Unauthorized" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get all categories for the authenticated user",
        "tags": ["categories"]
      }
    },
    "/categories/{id}": {
      "get": {
        "operationId": "CategoryController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Category retrieved successfully",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CategoryResponseDto" }
              }
            }
          },
          "401": { "description": "Unauthorized" },
          "404": { "description": "Category not found" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get a single category by ID",
        "tags": ["categories"]
      },
      "patch": {
        "operationId": "CategoryController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UpdateCategoryDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Category updated successfully",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/CategoryResponseDto" }
              }
            }
          },
          "401": { "description": "Unauthorized" },
          "404": { "description": "Category not found" },
          "409": { "description": "Category name already exists" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Update a category",
        "tags": ["categories"]
      },
      "delete": {
        "operationId": "CategoryController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "204": { "description": "Category deleted successfully" },
          "401": { "description": "Unauthorized" },
          "404": { "description": "Category not found" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Delete a category",
        "tags": ["categories"]
      }
    },
    "/transactions": {
      "post": {
        "operationId": "TransactionController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CreateTransactionDto" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "The transaction has been successfully created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionResponseDto"
                }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create a new transaction",
        "tags": ["transactions"]
      },
      "get": {
        "operationId": "TransactionController_findAll",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Page number",
            "schema": { "default": 1, "type": "number" }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Items per page",
            "schema": { "default": 10, "type": "number" }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "Filter by start date (ISO string)",
            "schema": { "type": "string" }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "Filter by end date (ISO string)",
            "schema": { "type": "string" }
          },
          {
            "name": "categoryId",
            "required": false,
            "in": "query",
            "description": "Filter by category ID",
            "schema": { "type": "string" }
          },
          {
            "name": "type",
            "required": false,
            "in": "query",
            "description": "Filter by transaction type (INCOME, EXPENSE, SAVING)",
            "schema": {
              "type": "string",
              "enum": ["INCOME", "EXPENSE", "SAVING"]
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "description": "Sort by field (date, amount)",
            "schema": { "default": "date", "type": "string" }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "description": "Sort order (asc, desc)",
            "schema": { "default": "desc", "type": "string" }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "Search term for description",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of transactions.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TransactionResponseDto"
                  }
                }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get all transactions with filters",
        "tags": ["transactions"]
      }
    },
    "/transactions/summary": {
      "get": {
        "operationId": "TransactionController_getSummary",
        "parameters": [
          {
            "name": "startDate",
            "required": true,
            "in": "query",
            "schema": { "type": "string" }
          },
          {
            "name": "endDate",
            "required": true,
            "in": "query",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Transaction summary.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionSummaryDto"
                }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get transaction summary (Income, Expense, Savings)",
        "tags": ["transactions"]
      }
    },
    "/transactions/export": {
      "get": {
        "operationId": "TransactionController_export",
        "parameters": [
          {
            "name": "page",
            "required": false,
            "in": "query",
            "description": "Page number",
            "schema": { "default": 1, "type": "number" }
          },
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Items per page",
            "schema": { "default": 10, "type": "number" }
          },
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "description": "Filter by start date (ISO string)",
            "schema": { "type": "string" }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "description": "Filter by end date (ISO string)",
            "schema": { "type": "string" }
          },
          {
            "name": "categoryId",
            "required": false,
            "in": "query",
            "description": "Filter by category ID",
            "schema": { "type": "string" }
          },
          {
            "name": "type",
            "required": false,
            "in": "query",
            "description": "Filter by transaction type (INCOME, EXPENSE, SAVING)",
            "schema": {
              "type": "string",
              "enum": ["INCOME", "EXPENSE", "SAVING"]
            }
          },
          {
            "name": "sortBy",
            "required": false,
            "in": "query",
            "description": "Sort by field (date, amount)",
            "schema": { "default": "date", "type": "string" }
          },
          {
            "name": "sortOrder",
            "required": false,
            "in": "query",
            "description": "Sort order (asc, desc)",
            "schema": { "default": "desc", "type": "string" }
          },
          {
            "name": "search",
            "required": false,
            "in": "query",
            "description": "Search term for description",
            "schema": { "type": "string" }
          }
        ],
        "responses": { "200": { "description": "CSV file download" } },
        "security": [{ "bearer": [] }],
        "summary": "Export transactions to CSV",
        "tags": ["transactions"]
      }
    },
    "/transactions/import": {
      "post": {
        "operationId": "TransactionController_import",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": { "type": "string", "format": "binary" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Transactions imported successfully" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Import transactions from CSV",
        "tags": ["transactions"]
      }
    },
    "/transactions/{id}": {
      "get": {
        "operationId": "TransactionController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "The transaction found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionResponseDto"
                }
              }
            }
          },
          "404": { "description": "Transaction not found." }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get a transaction by id",
        "tags": ["transactions"]
      },
      "patch": {
        "operationId": "TransactionController_update",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UpdateTransactionDto" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "The transaction has been successfully updated.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TransactionResponseDto"
                }
              }
            }
          },
          "404": { "description": "Transaction not found." }
        },
        "security": [{ "bearer": [] }],
        "summary": "Update a transaction",
        "tags": ["transactions"]
      },
      "delete": {
        "operationId": "TransactionController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "204": {
            "description": "The transaction has been successfully deleted."
          },
          "404": { "description": "Transaction not found." }
        },
        "security": [{ "bearer": [] }],
        "summary": "Delete a transaction",
        "tags": ["transactions"]
      }
    },
    "/budgets": {
      "post": {
        "operationId": "BudgetController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CreateBudgetDto" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "The budget has been successfully created.",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/BudgetResponseDto" }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create a new budget",
        "tags": ["budgets"]
      },
      "get": {
        "operationId": "BudgetController_findAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of budgets with spending status.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/BudgetResponseDto" }
                }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get all budgets with status",
        "tags": ["budgets"]
      }
    },
    "/budgets/{id}": {
      "get": {
        "operationId": "BudgetController_findOne",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "The budget status.",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/BudgetResponseDto" }
              }
            }
          },
          "404": { "description": "Budget not found." }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get a budget status by id",
        "tags": ["budgets"]
      }
    },
    "/goals": {
      "post": {
        "operationId": "GoalController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/CreateGoalDto" }
            }
          }
        },
        "responses": {
          "201": { "description": "The goal has been successfully created." }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create a new savings goal",
        "tags": ["goals"]
      },
      "get": {
        "operationId": "GoalController_findAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of goals.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/GoalResponseDto" }
                }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get all goals with progress",
        "tags": ["goals"]
      }
    },
    "/goals/{id}/progress": {
      "patch": {
        "operationId": "GoalController_updateProgress",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UpdateGoalProgressDto" }
            }
          }
        },
        "responses": {
          "200": { "description": "Goal progress updated." },
          "404": { "description": "Goal not found." }
        },
        "security": [{ "bearer": [] }],
        "summary": "Update goal progress (saved amount)",
        "tags": ["goals"]
      }
    },
    "/analytics/category-breakdown": {
      "get": {
        "operationId": "AnalyticsController_getCategoryBreakdown",
        "parameters": [
          {
            "name": "startDate",
            "required": true,
            "in": "query",
            "schema": { "type": "string" }
          },
          {
            "name": "endDate",
            "required": true,
            "in": "query",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Category breakdown.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CategoryBreakdownDto"
                  }
                }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get expense breakdown by category",
        "tags": ["analytics"]
      }
    },
    "/analytics/spending-trends": {
      "get": {
        "operationId": "AnalyticsController_getSpendingTrends",
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "schema": {
              "example": "monthly",
              "type": "string",
              "enum": ["daily", "weekly", "monthly"]
            }
          },
          {
            "name": "periods",
            "required": false,
            "in": "query",
            "description": "Number of periods to include",
            "schema": { "example": 6, "type": "number" }
          }
        ],
        "responses": {
          "200": { "description": "Time-series data of income and expenses" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get spending and income trends over time",
        "tags": ["analytics"]
      }
    },
    "/analytics/income-vs-expenses": {
      "get": {
        "operationId": "AnalyticsController_getIncomeVsExpenses",
        "parameters": [
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "schema": { "example": "2024-01-01", "type": "string" }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "schema": { "example": "2024-12-31", "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Income, expenses, net savings, and savings rate"
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Compare total income vs expenses for a period",
        "tags": ["analytics"]
      }
    },
    "/analytics/top-categories": {
      "get": {
        "operationId": "AnalyticsController_getTopCategories",
        "parameters": [
          {
            "name": "limit",
            "required": false,
            "in": "query",
            "description": "Number of top categories to return",
            "schema": { "example": 5, "type": "number" }
          },
          {
            "name": "period",
            "required": false,
            "in": "query",
            "schema": {
              "example": "month",
              "type": "string",
              "enum": ["week", "month", "year"]
            }
          },
          {
            "name": "type",
            "required": false,
            "in": "query",
            "schema": {
              "example": "EXPENSE",
              "type": "string",
              "enum": ["INCOME", "EXPENSE"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Ranked list of categories with amounts and percentages"
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get top spending or income categories",
        "tags": ["analytics"]
      }
    },
    "/analytics/monthly-summary": {
      "get": {
        "operationId": "AnalyticsController_getMonthlySummary",
        "parameters": [
          {
            "name": "month",
            "required": false,
            "in": "query",
            "description": "Month in YYYY-MM format",
            "schema": { "example": "2024-11", "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Complete month overview with income, expenses, budgets, and goals"
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get comprehensive monthly financial summary",
        "tags": ["analytics"]
      }
    },
    "/analytics/budget-performance": {
      "get": {
        "operationId": "AnalyticsController_getBudgetPerformance",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Budget status with spent, remaining, and alerts"
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get performance overview of all active budgets",
        "tags": ["analytics"]
      }
    },
    "/analytics/savings-rate": {
      "get": {
        "operationId": "AnalyticsController_getSavingsRate",
        "parameters": [
          {
            "name": "period",
            "required": false,
            "in": "query",
            "schema": {
              "example": "year",
              "type": "string",
              "enum": ["month", "quarter", "year"]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Average savings rate, monthly breakdown, and trend"
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Analyze savings rate over time",
        "tags": ["analytics"]
      }
    },
    "/analytics/cash-flow": {
      "get": {
        "operationId": "AnalyticsController_getCashFlow",
        "parameters": [
          {
            "name": "startDate",
            "required": false,
            "in": "query",
            "schema": { "example": "2024-11-01", "type": "string" }
          },
          {
            "name": "endDate",
            "required": false,
            "in": "query",
            "schema": { "example": "2024-12-31", "type": "string" }
          }
        ],
        "responses": {
          "200": { "description": "Projected balance over time" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Project cash flow based on recurring transactions",
        "tags": ["analytics"]
      }
    },
    "/analytics/spending-heatmap": {
      "get": {
        "operationId": "AnalyticsController_getSpendingHeatmap",
        "parameters": [
          {
            "name": "year",
            "required": false,
            "in": "query",
            "schema": { "example": 2024, "type": "number" }
          }
        ],
        "responses": {
          "200": { "description": "Daily spending amounts for the year" }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get daily spending data for heatmap visualization",
        "tags": ["analytics"]
      }
    },
    "/analytics/year-comparison": {
      "get": {
        "operationId": "AnalyticsController_getYearComparison",
        "parameters": [
          {
            "name": "year",
            "required": false,
            "in": "query",
            "schema": { "example": 2024, "type": "number" }
          }
        ],
        "responses": {
          "200": {
            "description": "Year-over-year comparison with percentage changes"
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Compare current year with previous year month-by-month",
        "tags": ["analytics"]
      }
    },
    "/analytics/health-score": {
      "get": {
        "operationId": "AnalyticsController_getHealthScore",
        "parameters": [],
        "responses": {
          "200": {
            "description": "Composite health score (0-100) with factor breakdown and recommendations"
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Calculate financial health score based on multiple factors",
        "tags": ["analytics"]
      }
    },
    "/recurring-transactions": {
      "post": {
        "operationId": "RecurringTransactionController_create",
        "parameters": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRecurringTransactionDto"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "The recurring transaction has been successfully created.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecurringTransactionResponseDto"
                }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Create a new recurring transaction",
        "tags": ["recurring-transactions"]
      },
      "get": {
        "operationId": "RecurringTransactionController_findAll",
        "parameters": [],
        "responses": {
          "200": {
            "description": "List of recurring transactions.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/RecurringTransactionResponseDto"
                  }
                }
              }
            }
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Get all recurring transactions",
        "tags": ["recurring-transactions"]
      }
    },
    "/recurring-transactions/{id}": {
      "delete": {
        "operationId": "RecurringTransactionController_remove",
        "parameters": [
          {
            "name": "id",
            "required": true,
            "in": "path",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "204": {
            "description": "The recurring transaction has been successfully deleted."
          }
        },
        "security": [{ "bearer": [] }],
        "summary": "Delete a recurring transaction",
        "tags": ["recurring-transactions"]
      }
    }
  },
  "info": {
    "title": "Budget Tracker API",
    "description": "A comprehensive personal finance management API with multi-currency support, budgets, goals, and analytics",
    "version": "1.0.0",
    "contact": {
      "name": "Budget Tracker Team",
      "url": "",
      "email": "support@budgettracker.com"
    },
    "license": { "name": "MIT", "url": "https://opensource.org/licenses/MIT" }
  },
  "tags": [
    { "name": "auth", "description": "Authentication & Authorization" },
    { "name": "user", "description": "User Profile Management" },
    { "name": "categories", "description": "Transaction Categories" },
    { "name": "transactions", "description": "Transaction Management" },
    { "name": "budgets", "description": "Budget Tracking" },
    { "name": "goals", "description": "Savings Goals" },
    { "name": "analytics", "description": "Financial Analytics" },
    {
      "name": "recurring-transactions",
      "description": "Recurring Transactions"
    }
  ],
  "servers": [],
  "components": {
    "securitySchemes": {
      "bearer": { "scheme": "bearer", "bearerFormat": "JWT", "type": "http" }
    },
    "schemas": {
      "SignupDto": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "example": "John Doe" },
          "email": { "type": "string", "example": "user@example.com" },
          "password": {
            "type": "string",
            "example": "password123",
            "minLength": 6
          }
        },
        "required": ["name", "email", "password"]
      },
      "AuthResponseDto": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
            "description": "Access token (set as HTTP-only cookie)"
          },
          "refreshToken": {
            "type": "string",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
            "description": "Refresh token (set as HTTP-only cookie)"
          },
          "user": { "type": "object" }
        },
        "required": ["user"]
      },
      "LoginDto": {
        "type": "object",
        "properties": {
          "email": { "type": "string", "example": "user@example.com" },
          "password": { "type": "string", "example": "password123" }
        },
        "required": ["email", "password"]
      },
      "RevokeTokenDto": {
        "type": "object",
        "properties": {
          "refreshToken": {
            "type": "string",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          }
        },
        "required": ["refreshToken"]
      },
      "VerifyEmailDto": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "example": "550e8400-e29b-41d4-a716-446655440000"
          },
          "code": { "type": "string", "example": "123456" }
        }
      },
      "ResendVerificationDto": {
        "type": "object",
        "properties": {
          "email": { "type": "string", "example": "user@example.com" }
        },
        "required": ["email"]
      },
      "ForgotPasswordDto": {
        "type": "object",
        "properties": {
          "email": { "type": "string", "example": "user@example.com" }
        },
        "required": ["email"]
      },
      "ResetPasswordDto": {
        "type": "object",
        "properties": {
          "token": { "type": "string", "example": "token-uuid-here" },
          "code": { "type": "string", "example": "123456" },
          "newPassword": {
            "type": "string",
            "example": "newPassword123",
            "minLength": 6
          }
        },
        "required": ["newPassword"]
      },
      "UserResponseDto": {
        "type": "object",
        "properties": { "user": { "type": "object" } },
        "required": ["user"]
      },
      "UpdateProfileDto": {
        "type": "object",
        "properties": {
          "name": { "type": "string", "example": "John Doe" },
          "avatar": {
            "type": "string",
            "example": "https://example.com/avatar.jpg"
          },
          "baseCurrency": {
            "type": "string",
            "example": "USD",
            "description": "Base currency for the user"
          }
        }
      },
      "ChangePasswordDto": {
        "type": "object",
        "properties": {
          "currentPassword": {
            "type": "string",
            "example": "currentPassword123"
          },
          "newPassword": {
            "type": "string",
            "example": "newPassword123",
            "minLength": 6
          }
        },
        "required": ["currentPassword", "newPassword"]
      },
      "ChangeEmailDto": {
        "type": "object",
        "properties": {
          "newEmail": { "type": "string", "example": "newemail@example.com" }
        },
        "required": ["newEmail"]
      },
      "CreateCategoryDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "Groceries",
            "description": "Category name"
          },
          "type": {
            "type": "string",
            "example": "EXPENSE",
            "enum": ["INCOME", "EXPENSE", "SAVING"],
            "description": "Category type"
          },
          "icon": {
            "type": "string",
            "example": "shopping-cart",
            "description": "Icon identifier (e.g., Lucide or Font Awesome name)"
          }
        },
        "required": ["name", "type"]
      },
      "CategoryResponseDto": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "example": "uuid-here" },
          "name": { "type": "string", "example": "Groceries" },
          "type": {
            "type": "string",
            "example": "EXPENSE",
            "enum": ["INCOME", "EXPENSE", "SAVING"]
          },
          "icon": {
            "type": "object",
            "example": "shopping-cart",
            "nullable": true
          },
          "userId": { "type": "string", "example": "uuid-here" }
        },
        "required": ["id", "name", "type", "userId"]
      },
      "UpdateCategoryDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "Groceries",
            "description": "Category name"
          },
          "type": {
            "type": "string",
            "example": "EXPENSE",
            "enum": ["INCOME", "EXPENSE", "SAVING"],
            "description": "Category type"
          },
          "icon": {
            "type": "string",
            "example": "shopping-cart",
            "description": "Icon identifier (e.g., Lucide or Font Awesome name)"
          }
        }
      },
      "CreateTransactionDto": {
        "type": "object",
        "properties": {
          "amount": {
            "type": "number",
            "example": 150.5,
            "description": "The amount of the transaction"
          },
          "currency": {
            "type": "string",
            "example": "USD",
            "description": "Currency code (ISO 4217)"
          },
          "description": {
            "type": "string",
            "example": "Grocery shopping",
            "description": "Description of the transaction"
          },
          "date": {
            "type": "string",
            "example": "2023-11-24T10:00:00Z",
            "description": "Date of the transaction"
          },
          "categoryId": {
            "type": "string",
            "example": "uuid-of-category",
            "description": "ID of the category"
          }
        },
        "required": ["amount", "date", "categoryId"]
      },
      "CategoryDto": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "type": { "type": "string", "enum": ["INCOME", "EXPENSE", "SAVING"] },
          "icon": { "type": "object", "nullable": true }
        },
        "required": ["id", "name", "type"]
      },
      "TransactionResponseDto": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "amount": { "type": "number" },
          "description": { "type": "object", "nullable": true },
          "date": { "format": "date-time", "type": "string" },
          "categoryId": { "type": "string" },
          "category": { "$ref": "#/components/schemas/CategoryDto" },
          "userId": { "type": "string" },
          "createdAt": { "format": "date-time", "type": "string" },
          "updatedAt": { "format": "date-time", "type": "string" }
        },
        "required": [
          "id",
          "amount",
          "date",
          "categoryId",
          "category",
          "userId",
          "createdAt",
          "updatedAt"
        ]
      },
      "TransactionSummaryDto": {
        "type": "object",
        "properties": {
          "totalIncome": {
            "type": "number",
            "example": 5000,
            "description": "Total income amount"
          },
          "totalExpense": {
            "type": "number",
            "example": 2000,
            "description": "Total expense amount"
          },
          "totalSaving": {
            "type": "number",
            "example": 1000,
            "description": "Total saving amount"
          },
          "netBalance": {
            "type": "number",
            "example": 3000,
            "description": "Net balance (Income - Expense)"
          }
        },
        "required": ["totalIncome", "totalExpense", "totalSaving", "netBalance"]
      },
      "UpdateTransactionDto": {
        "type": "object",
        "properties": {
          "amount": {
            "type": "number",
            "example": 150.5,
            "description": "The amount of the transaction"
          },
          "currency": {
            "type": "string",
            "example": "USD",
            "description": "Currency code (ISO 4217)"
          },
          "description": {
            "type": "string",
            "example": "Grocery shopping",
            "description": "Description of the transaction"
          },
          "date": {
            "type": "string",
            "example": "2023-11-24T10:00:00Z",
            "description": "Date of the transaction"
          },
          "categoryId": {
            "type": "string",
            "example": "uuid-of-category",
            "description": "ID of the category"
          }
        }
      },
      "CreateBudgetDto": {
        "type": "object",
        "properties": {
          "limitAmount": {
            "type": "number",
            "example": 500,
            "description": "Budget limit amount"
          },
          "startDate": {
            "type": "string",
            "example": "2023-11-01T00:00:00Z",
            "description": "Start date of the budget period"
          },
          "endDate": {
            "type": "string",
            "example": "2023-11-30T23:59:59Z",
            "description": "End date of the budget period"
          },
          "categoryId": {
            "type": "string",
            "example": "uuid-of-category",
            "description": "ID of the category"
          }
        },
        "required": ["limitAmount", "startDate", "endDate", "categoryId"]
      },
      "BudgetResponseDto": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "limitAmount": { "type": "number" },
          "startDate": { "format": "date-time", "type": "string" },
          "endDate": { "format": "date-time", "type": "string" },
          "categoryId": { "type": "string" },
          "category": { "$ref": "#/components/schemas/CategoryDto" },
          "spentAmount": {
            "type": "number",
            "description": "Amount spent in this budget period"
          },
          "percentageUsed": {
            "type": "number",
            "description": "Percentage of budget used"
          }
        },
        "required": [
          "id",
          "limitAmount",
          "startDate",
          "endDate",
          "categoryId",
          "category",
          "spentAmount",
          "percentageUsed"
        ]
      },
      "CreateGoalDto": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "example": "Vacation Fund",
            "description": "Name of the goal"
          },
          "targetAmount": {
            "type": "number",
            "example": 2000,
            "description": "Target amount to save"
          },
          "targetDate": {
            "type": "string",
            "example": "2024-12-31T00:00:00Z",
            "description": "Target date to reach the goal"
          }
        },
        "required": ["name", "targetAmount"]
      },
      "GoalResponseDto": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "targetAmount": { "type": "number" },
          "currentSaved": { "type": "number" },
          "targetDate": { "type": "object", "nullable": true },
          "percentageCompleted": {
            "type": "number",
            "description": "Percentage of goal completed"
          },
          "remainingAmount": {
            "type": "number",
            "description": "Amount remaining to reach goal"
          }
        },
        "required": [
          "id",
          "name",
          "targetAmount",
          "currentSaved",
          "percentageCompleted",
          "remainingAmount"
        ]
      },
      "UpdateGoalProgressDto": {
        "type": "object",
        "properties": {
          "currentSaved": {
            "type": "number",
            "example": 500,
            "description": "New current saved amount"
          }
        },
        "required": ["currentSaved"]
      },
      "CategoryBreakdownDto": {
        "type": "object",
        "properties": {
          "categoryName": { "type": "string" },
          "totalAmount": { "type": "number" },
          "percentage": { "type": "number" }
        },
        "required": ["categoryName", "totalAmount", "percentage"]
      },
      "CreateRecurringTransactionDto": {
        "type": "object",
        "properties": {
          "amount": {
            "type": "number",
            "example": 100,
            "description": "Amount of the recurring transaction"
          },
          "description": {
            "type": "string",
            "example": "Netflix Subscription",
            "description": "Description"
          },
          "frequency": {
            "type": "string",
            "enum": ["DAILY", "WEEKLY", "MONTHLY", "YEARLY"],
            "example": "MONTHLY",
            "description": "Frequency of the transaction"
          },
          "startDate": {
            "type": "string",
            "example": "2023-12-01T00:00:00Z",
            "description": "Start date"
          },
          "endDate": {
            "type": "string",
            "example": "2024-12-01T00:00:00Z",
            "description": "End date (optional)"
          },
          "categoryId": {
            "type": "string",
            "example": "uuid-of-category",
            "description": "Category ID"
          }
        },
        "required": [
          "amount",
          "description",
          "frequency",
          "startDate",
          "categoryId"
        ]
      },
      "RecurringTransactionResponseDto": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "amount": { "type": "number" },
          "description": { "type": "object", "nullable": true },
          "frequency": {
            "type": "string",
            "enum": ["DAILY", "WEEKLY", "MONTHLY", "YEARLY"]
          },
          "startDate": { "format": "date-time", "type": "string" },
          "endDate": { "type": "object", "nullable": true },
          "nextRunDate": { "format": "date-time", "type": "string" },
          "isActive": { "type": "boolean" },
          "categoryId": { "type": "string" }
        },
        "required": [
          "id",
          "amount",
          "frequency",
          "startDate",
          "nextRunDate",
          "isActive",
          "categoryId"
        ]
      }
    }
  }
}
